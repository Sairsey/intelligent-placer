# Алгоритм помещения выпуклых многоугольников в выпуклый контур
Подход с перебором всех возможных позиций/поворотов не является очень интеллектулаьным, поэтому была предпринята попытка пойти немного другим путём.
## Упрощение задачи
Для начала стоит упросить задачу. Возьмём 1 выпуклый многоугольник и поместим его в выпуклый контур. Так как оба рассматриваемых объекта выпуклые, возникает желание воспользоваться градиентными методами оптимизации для минимизации некоторой функции, которую следует придумать. В идеале такие методы смогут за достаточно малое число итераций ответить на вопрос "Можно ли уместить, и если да то как".
## Функционал
$f1(x, y, \theta) = dist(object(x, y, \theta), contour)^2 + area(substract(object(x, y, \theta), contour))$

Где

$x$ - перемещение по оси X

$y$ - перемещение по оси Y

$\theta$ - поворот

$object(x, y, \theta)$ - множество точек объекта, после переноса и поворота

$contour$ - множество точек контура

$dist(A,B)$ - расстояние между двумя множествами A и B

$area(A)$ - площадь множества A

$substract(A, B)$ - разность множеств A и B

Данный функционал будет выпуклым как сумма двух выпуклых функционалов.
Для наглядности привожу график этого функционала в 1-мерном случае (Задача о помещении отрезка в отрезок)
![function](tools/1d_example/func.png "Func")

Как можно заметить, первое слагаемое "доведёт" многоугольник до пересечения с контуром, а второе "уложит" многоугольник в контур

## О расположении множества многоугольников
К сожалению функционал $area(intersect(object_i(x_i, y_i, \theta_i), object_j(x_j, y_j, \theta_j)))$ является вогнутным. Поэтому проверка укладки нескольких многоугольников используя 


$$f2(x_1, y_1, \theta_1, x_2, y_2, ...) = \sum_{i=1}^m f1(x_i, y_i, \theta_i) +  \sum_{i,j=1}^m area(intersect(object_i(x_i, y_i, \theta_i), object_j(x_j, y_j, \theta_j)))$$

может не привести к желаемому ответу. 

Поэтому возникли следующие идеи которые стоит проверить:
  - То что функционал не выпуклый означает лишь то, что у него несколько локальных минимумов. Стоит попробовать различные стартовые расположения многоугольников друг относительно друга, но это даст некоторый перебор в нашем методе.
  - Можно попробовать укладывать многоугольники по очереди, каждый раз отрезая от контура зону с многоугольником, чтобы новый контур оставался выпуклым.
  - Можно проверять укладку сначала объектов по одному, затем по 2 и т.д., сохраняя предыдущие позиции объектов как новые стартовые позиции для градиентного метода.
